const headerBlock=document.querySelector(".header-block");let scroll=0;window.addEventListener("scroll",(function(){let e=window.pageYOffset;e>scroll?headerBlock.classList.add("header-hidden"):(headerBlock.classList.remove("header-hidden"),headerBlock.classList.add("header-active"),0===e&&headerBlock.classList.remove("header-active")),scroll=e}));const videoBlock=document.querySelector(".video-block"),video=document.querySelector(".video"),partnersBlock=document.querySelector(".partnership-block");window.addEventListener("scroll",(function(){let e=videoBlock.getBoundingClientRect().top;video.style.backgroundPositionY=e/10+"px";let t=partnersBlock.getBoundingClientRect().top;partnersBlock.style.backgroundPositionY=t/2+"px"}));const works=document.querySelectorAll(".work"),tagsBlock=document.querySelector(".portfolio-tags-block"),worksContainer=document.querySelector(".portfolio-block__works");let relocateX,relocateY;function calcAncMove(e,t){relocateX=e.getBoundingClientRect().left-t.getBoundingClientRect().left,relocateY=e.getBoundingClientRect().top-t.getBoundingClientRect().top,t.style.transform=`translate(${relocateX}px, ${relocateY}px)`}function selectClickedTag(e){e.classList.add("active-tag")}function removeSelectedTags(){document.querySelectorAll(".tag__link").forEach(e=>{e.classList.remove("active-tag")})}function restoreItems(){works.forEach(e=>{e.style.transform="scale(1)"})}tagsBlock.addEventListener("click",e=>{let t=e.target;if(t.classList.contains("tag__link"))for(removeSelectedTags(),selectClickedTag(t),i=0;i<works.length;i++)works[i].classList.remove("hidden-work"),t.innerText===works[i].dataset.type||t.innerText===works[i].dataset.subtype?console.log(works[i]):"All"===t.innerText?works[i].classList.remove("hidden-work"):works[i].classList.add("hidden-work")});const counters=document.querySelectorAll(".achievement__counter"),countersBlock=document.querySelector(".partnership-block");function addPoint(e,t,s){let o=+e.innerText,i=0,r=Math.round(t/(o/s)),n=setInterval(()=>{i+=s,e.innerText=i,i>=o&&(e.innerText=o,clearInterval(n))},r)}function initializeCounters(){addPoint(counters[0],4e3,50),addPoint(counters[1],4e3,3),addPoint(counters[2],4e3,20),addPoint(counters[3],4e3,10),addPoint(counters[4],4e3,5)}window.addEventListener("scroll",(function e(){window.pageYOffset>.68*countersBlock.offsetTop&&(this.removeEventListener("scroll",e),initializeCounters())}));const partners=document.querySelectorAll(".partner-logo");partners.forEach(e=>{e.classList.add("slider")});const slides=document.querySelectorAll(".slide"),prevButton=document.querySelector(".previous-button"),nextButton=document.querySelector(".next-button"),preTitle=document.querySelector(".slide-content__pre-title"),title=document.querySelector(".slide-content__title"),description=document.querySelector(".slide-content__description"),contentButton=document.querySelector(".content-button"),textArray=[preTitle,title,description,contentButton],sliderTagsBlock=document.querySelector(".slider-tags-block"),sliderTags=document.querySelectorAll(".slider-tag");let i=0;function initializeHomeSlider(){prevButton.addEventListener("click",()=>{textArray.forEach(e=>{e.classList.remove("showed-content")}),slides[i].addEventListener("transitionend",()=>{title.classList.contains("showed-content")||textArray.forEach(e=>{e.classList.add("showed-content")})}),slides[i].classList.remove("showed-slide"),sliderTags[i].classList.remove("active-slider-tag"),i--,i<0&&(i=slides.length-1),slides[i].classList.add("showed-slide"),sliderTags[i].classList.add("active-slider-tag")}),nextButton.addEventListener("click",()=>{textArray.forEach(e=>{e.classList.remove("showed-content")}),slides[i].addEventListener("transitionend",()=>{title.classList.contains("showed-content")||textArray.forEach(e=>{e.classList.add("showed-content")})}),slides[i].classList.remove("showed-slide"),sliderTags[i].classList.remove("active-slider-tag"),i++,i>slides.length-1&&(i=0),slides[i].classList.add("showed-slide"),sliderTags[i].classList.add("active-slider-tag")}),slideWithOrderTags()}function slideWithOrderTags(){sliderTagsBlock.addEventListener("click",e=>{for(let t=0;t<slides.length;t++)e.target.classList.contains("slider-tag")&&(slides[t].classList.remove("showed-slide"),sliderTags[t].classList.remove("active-slider-tag"),textArray.forEach(e=>{e.classList.remove("showed-content")}),slides[i].addEventListener("transitionend",()=>{title.classList.contains("showed-content")||textArray.forEach(e=>{e.classList.add("showed-content")})}),e.target.classList.add("active-slider-tag"),slides[t].dataset.order===e.target.dataset.order&&(slides[t].classList.add("showed-slide"),i=t))})}initializeHomeSlider();const sideBar=document.querySelector(".side-bar"),burgerButton=document.querySelector(".burger-button"),sideBarCloseButton=document.querySelector(".close-button");function initializeSideBar(){burgerButton.addEventListener("click",()=>{sideBar.classList.add("opened-bar")}),sideBar.addEventListener("click",e=>{(e.target.classList.contains("item__link")||e.target.classList.contains("close-button"))&&sideBar.classList.remove("opened-bar")}),document.querySelector("main").addEventListener("click",()=>{sideBar.classList.remove("opened-bar")})}initializeSideBar();